#{extends 'main.html' /}
#{set title:'PHP editor' /}
#{set 'moreStyles' }
    <link rel="stylesheet" href="@{'/public/code/lib/codemirror.css'}">
    <script src="@{'/public/code/lib/codemirror.js'}"></script>
    <script src="@{'/public/code/addon/edit/matchbrackets.js'}"></script>
    <script src="@{'/public/code/mode/htmlmixed/htmlmixed.js'}"></script>
    <script src="@{'/public/code/mode/xml/xml.js'}"></script>
    <script src="@{'/public/code/mode/javascript/javascript.js'}"></script>
    <script src="@{'/public/code/mode/css/css.js'}"></script>
    <script src="@{'/public/code/mode/clike/clike.js'}"></script>
    <script src="@{'/public/code/mode/php/php.js'}"></script>
    <style type="text/css">.CodeMirror {border-top: 1px solid black; border-bottom: 1px solid black;}</style>
#{/set}
<div class="container">   
	<div class="row">	
		<div class="span12">
    <h1>Editor</h1>
<form><textarea id="code" name="code">
${out1}
</textarea></form>
<p id = 'ext' >${ext}</p>
    <script>
	var ext = document.getElementById('ext').innerHTML;
	console.log(ext);
	if(ext == 'php'){
	  var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
	        lineNumbers: true,
	        matchBrackets: true,
	        mode: "application/x-httpd-php",
	        indentUnit: 4,
	        indentWithTabs: true,
	        enterMode: "keep",
	        tabMode: "shift"
	      });
	}else if(ext == 'js'){
	  console.log(ext);
	  var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
	        lineNumbers: true,
	        matchBrackets: true,
	        mode: "text/javascript",
	        indentUnit: 4,
	        indentWithTabs: true,
	        enterMode: "keep",
	        tabMode: "shift"
	      });
	}else if(ext == 'java'){
		  console.log(ext);
		  var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
		        lineNumbers: true,
		        matchBrackets: true,
		        mode: "text/x-java",
		        indentUnit: 4,
		        indentWithTabs: true,
		        enterMode: "keep",
		        tabMode: "shift"
		      });
	}else{
	  var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
	        lineNumbers: true,
	        matchBrackets: true,
	        indentUnit: 4,
	        indentWithTabs: true,
	        enterMode: "keep",
	        tabMode: "shift"
	      });
	}
    </script>
		</div>
	</div>
</div>
